<!DOCTYPE html>
<html>
	<title>Notification</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
	<link rel="stylesheet" href="styles/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="styles/style.css">
<body>

<script>
	var json = [
  {
    "id": 891,
    "type": "message",
    "data": {
      "from_name": "Gregory Windsor",
      "subject": "yfcrftuggyutgyhu"
    },
    "created_at": "2017-09-05T08:40:11+00:00"
  },
  {
    "id": 887,
    "type": "gallery",
    "data": {
      "gallery_title": "test topic",
      "user_name": "Noah Cranock"
    },
    "created_at": "2017-08-30T07:58:06+00:00"
  },
  {
    "id": 886,
    "type": "gallery",
    "data": {
      "gallery_title": "test topic",
      "user_name": "Jamie Ritchie"
    },
    "created_at": "2017-08-30T07:56:32+00:00"
  },
  {
    "id": 850,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-29T11:05:14+00:00"
  },
  {
    "id": 851,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-29T11:05:14+00:00"
  },
  {
    "id": 848,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-29T11:05:04+00:00"
  },
  {
    "id": 849,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-29T11:05:04+00:00"
  },
  {
    "id": 841,
    "type": "file",
    "data": {
      "user_name": "Noah Cranock",
      "file_name": "test_doc",
      "module_name": "Induction"
    },
    "created_at": "2017-08-29T11:03:38+00:00"
  },
  {
    "id": 835,
    "type": "forum",
    "data": {
      "from_name": "Stephen Doig",
      "subject": "Test"
    },
    "created_at": "2017-08-24T14:16:56+00:00"
  },
  {
    "id": 831,
    "type": "forum",
    "data": {
      "from_name": "Stephen Doig",
      "subject": "Test"
    },
    "created_at": "2017-08-22T11:52:02+00:00"
  },
  {
    "id": 822,
    "type": "file",
    "data": {
      "user_name": "Noah Cranock",
      "file_name": "test_pdf",
      "module_name": "Induction"
    },
    "created_at": "2017-08-22T11:03:44+00:00"
  },
  {
    "id": 820,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-22T11:02:31+00:00"
  },
  {
    "id": 821,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-22T11:02:31+00:00"
  },
  {
    "id": 803,
    "type": "gallery",
    "data": {
      "gallery_title": "New topic",
      "user_name": "Jamie Ritchie"
    },
    "created_at": "2017-08-21T09:21:09+00:00"
  },
  {
    "id": 790,
    "type": "file",
    "data": {
      "user_name": "Noah Cranock",
      "file_name": "test",
      "module_name": "The Leadership Challenge"
    },
    "created_at": "2017-08-18T10:09:02+00:00"
  },
  {
    "id": 789,
    "type": "file",
    "data": {
      "user_name": "Noah Cranock",
      "file_name": "test_csv",
      "module_name": "The Leadership Challenge"
    },
    "created_at": "2017-08-18T10:08:45+00:00"
  },
  {
    "id": 788,
    "type": "file",
    "data": {
      "user_name": "Noah Cranock",
      "file_name": "test_pdf",
      "module_name": "The Leadership Challenge"
    },
    "created_at": "2017-08-18T10:08:34+00:00"
  },
  {
    "id": 787,
    "type": "file",
    "data": {
      "user_name": "Noah Cranock",
      "file_name": "test_doc",
      "module_name": "The Leadership Challenge"
    },
    "created_at": "2017-08-18T10:08:19+00:00"
  },
  {
    "id": 779,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-15T08:48:53+00:00"
  },
  {
    "id": 778,
    "type": "message",
    "data": {
      "from_name": "Jack Gordon",
      "subject": "Induction"
    },
    "created_at": "2017-08-15T08:48:52+00:00"
  }
];


function timeSince(dateIn) {

}
</script>


<script>
var app = angular.module("notificationsList", []);


app.filter('formatDate', function () {
   return function (input) {
	   var date = new Date(input);

	  var seconds = Math.floor((new Date() - date) / 1000);

	  var interval = Math.floor(seconds / 31536000);

	  if (interval > 1) {
		return interval + " years ago";
	  }
	  interval = Math.floor(seconds / 2592000);
	  if (interval > 1) {
		return interval + " months ago";
	  }
	  interval = Math.floor(seconds / 86400);
	  if (interval > 1) {
		return interval + " days ago";
	  }
	  interval = Math.floor(seconds / 3600);
	  if (interval > 1) {
		return interval + " hours ago";
	  }
	  interval = Math.floor(seconds / 60);
	  if (interval > 1) {
		return interval + " minutes ago";
	  }
	  return Math.floor(seconds) + " seconds ago";
   }
});


 
app.controller("myCtrl", function($scope) {
    $scope.data = angular.fromJson(json);
	$scope.timeSince = timeSince;
});


</script>

<div ng-app="notificationsList" ng-controller="myCtrl">



<div ng-repeat="x in data">
	<div class="alert-box error flex-center-vertically" ng-switch on="x.type">

		<div ng-switch-when="message">
			<div class="heading-box">{{x.created_at|formatDate}} </div>
			<div class="tail-box"><i class="fa fa-envelope-o" aria-hidden="true"></i> {{x.data.from_name}} messaged you in <a href="#">{{x.data.subject}}</a></div>
		</div>
		<div ng-switch-when="forum">
			<div class="heading-box">{{x.created_at|formatDate}} </div>
			<div class="tail-box"><i class="fa fa-comment-o" aria-hidden="true"></i> {{x.data.from_name}} replied to you in <a href="#">{{x.data.subject}}</a></div>
		</div>		
		<div ng-switch-when="gallery">
			<div class="heading-box">{{x.created_at|formatDate}} </div>
			<div class="tail-box"><i class="fa fa-picture-o" aria-hidden="true"></i> {{x.data.user_name}} uploaded new file to gallery <a href="#">{{x.data.gallery_title}}</a></div>
		</div>
		<div ng-switch-when="file">
			<div class="heading-box">{{x.created_at|formatDate}} </div>
			<div class="tail-box"><i class="fa fa-upload" aria-hidden="true"></i> {{x.data.user_name}} uploaded new file <a href="#">{{x.data.file_name}}</a> to <a href="#">{{x.data.module_name}}</a></div>
		</div>		
	</div>
</div>

</body>
</html>